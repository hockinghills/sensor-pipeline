[global_tags]

[agent]
  interval = "10s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "2s"
  flush_interval = "10s"
  flush_jitter = "2s"
  precision = ""
  hostname = "piiot"
  omit_hostname = false

[[outputs.influxdb_v2]]
  urls = ["http://127.0.0.1:8181"]
  token = "apiv3_WxTkoQocUjT_WPeEGhuMCpiEy4varzy4QIPsVeEV3_1kr2WcjxhnHx1Fz2oMi7PxFZ_BrqCnudX-Ni7snWkx_Q"
  organization = "empyrean"
  bucket = "fucked"

[[inputs.mqtt_consumer]]
  servers = ["tcp://192.168.50.224:1883"]
  topics = [
    "furnace/data"
  ]
  data_format = "json"
  name_override = "furnace"
  interval = "10ms"  # High-frequency as specified; monitor for performance

[[inputs.multifile]]
  base_dir = "/sys/bus/i2c/devices/1-0077/iio:device0"
  name_override = "multifile"
  interval = "500ms"

  [[inputs.multifile.file]]
    file = "in_temp_input"
    dest = "temperature"
    conversion = "float"  # Assuming temp in millidegrees; adjust if needed

  [[inputs.multifile.file]]
    file = "in_pressure_input"
    dest = "pressure"
    conversion = "float(3)"  # Assuming hPa * 1000 or similar

  [[inputs.multifile.file]]
    file = "in_humidityrelative_input"
    dest = "humidity"
    conversion = "float"  # Assuming % * 1000
